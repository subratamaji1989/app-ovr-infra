# This file centralizes all pipeline control and configuration variables.
# The buildspec.yml reads this file to configure its execution environment.
pipeline-parameters:
  # -- Pipeline Stage Control --
  PIPELINE_STAGE: "ALL"       # "VALIDATE" | "PLAN" | "APPLY" | "POST_VALIDATE"

  # -- Infrastructure Definition --
  APP: "app-ovr-infra"
  CLOUD: "azure"
  ENVIRONMENT: "stage"
  STACK_NAME: "vm-stack"

  # -- Dynamic Path Configuration (Do Not Change This) --
  # These paths point to files within the 'terraform-platform' repository.
  COMPOSITION_PATH: "${CLOUD}/infra-stack/${STACK_NAME}"
  SCHEMAS_DIR_PATH: "${CLOUD}/schemas"
  # These paths point to files within the 'app-ovr-infra' repository.
  VARS_PATH: "${APP}/${CLOUD}/${ENVIRONMENT}/vars"
  BACKEND_CONFIG_PATH: "${APP}/${CLOUD}/${ENVIRONMENT}/backend.tf"

  # -- Tool Versioning --
  TF_VERSION: "1.6.6"
  CHECKOV_VERSION: "2.0.0"

  # -- Post-Deployment Configuration --